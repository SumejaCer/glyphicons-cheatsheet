<html>
  <head>
    <title>Hello React</title>
    <script src="http://fb.me/react-0.12.2.js"></script>
    <script src="http://fb.me/JSXTransformer-0.12.2.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/glyphicon-cheatsheet.css" rel="stylesheet">
  </head>
  <body>
    <div class="container" id="content"></div>
    <script type="text/jsx">
       
       var Icon = React.createClass({
          render: function() {
            return (
              <div className="icon text-center">
                <span className={this.props.class}></span>
                <p>{this.props.children}</p>
                <Dropdown />
                <hr />
              </div>
            );
          }
        });  
    
        var Dropdown = React.createClass({
          render: function() {
            return (
                <div className="btn-group">
                <button type="button" className="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                Copy <span className="caret"></span>
                </button>
                <ul className="dropdown-menu" role="menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                </ul>
                </div>
            );
          }
        });
        
       var IconList = React.createClass({
          render: function() {
            var iconNodes = this.props.data.map(function (icon) {
              return (
                <Icon class={icon.class}>
                  {icon.caption}
                </Icon>
              );
            });
            return (
              <div className="iconList">
                {iconNodes}
              </div>
            );
          }
        });

              
        var Cheatsheet = React.createClass({
        
        loadCommentsFromServer: function() {
            $.ajax({
                  url: this.props.url,
                  dataType: 'json',
                  success: function(data) {
                    this.setState({data: data});
                  }.bind(this),
                  error: function(xhr, status, err) {
                    console.error(this.props.url, status, err.toString());
                  }.bind(this)
                });
              },
          componentDidMount: function() {
            this.loadCommentsFromServer();
            setInterval(this.loadCommentsFromServer, this.props.pollInterval);
          },
            
          getInitialState: function() {
            return {data: []};
          },
          render: function() {
            return (
              <div className="col-md-12">
                <h1 className="text-center">Glyphicons Cheatsheet</h1>
                <IconList data={this.state.data} />     
              </div>
            );
          }
        });

var data = [
  {class: "glyphicon glyphicon-home", caption: "Home"},
  {class: "glyphicon glyphicon-star", caption: "Star"}
]

        React.render(
          <Cheatsheet url="icons-1-9-0-test.json" pollInterval={2000} />,
          document.getElementById('content')
);
    </script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>    
  </body>
</html>